## Network > Peering Gateway > 콘솔 사용 가이드

콘솔에서 Peering Gateway 서비스를 사용하는 방법을 설명합니다.

## 피어링

**피어링**은 서로 다른 두 개의 **VPC**를 연결하는 기능입니다. 보통의 경우 VPC는 네트워크 영역이 다르기 때문에 서로 통신이 불가능합니다. **플로팅 IP**를 이용해 연결할 수는 있으나, 네트워크 사용량에 따라 추가로 비용을 지불해야 합니다. 하지만, 피어링 기능을 사용하면 추가 비용 지불 없이 두 개의 **VPC**를 연결할 수 있습니다.

* 피어링은 서로 다른 두 VPC를 연결합니다. 다른 VPC를 건너서 또 다른 VPC로 연결은 지원하지 않습니다. `A <-> B <-> C` 연결에서 `A`와 `C`는 연결되지 않습니다.
* 두 VPC의 IP 주소 영역이 겹치면 사용할 수 없습니다.<br>
  IP 주소 영역 한쪽이 다른 한쪽과 포함 관계가 되어서는 안 되며, 이런 경우 피어링 생성에 실패합니다.
* **기본 라우팅 테이블**에 연결되지 않은 서브넷으로는 통신이 불가능합니다.

## 프로젝트 피어링

**프로젝트 피어링**은 서로 다른 프로젝트에 생성된 두 개의 **VPC**를 연결하는 기능입니다. 같은 프로젝트의 VPC는 피어링을 이용하여 연결할 수 있으나 프로젝트가 다른 VPC를 연결할 수는 없습니다. 하지만, 프로젝트 피어링 기능을 이용하면 프로젝트가 다른 두 개의 VPC를 연결할 수 있습니다.

* 프로젝트 피어링은 서로 다른 프로젝트의 두 VPC를 연결합니다. 다른 VPC를 건너서 또 다른 VPC로 연결하는 것은 지원하지 않습니다. 예를 들어 `A <-> B <-> C` 연결에서 `A`와 `C`는 연결되지 않습니다.
* 동일 리전 서로 다른 프로젝트의 두 개의 VPC만 연결이 가능합니다.
* 프로젝트 피어링을 생성하면 연결된 다른 프로젝트에서 자동으로 생성됩니다.
* 프로젝트 피어링을 삭제하면 연결된 다른 프로젝트에서 자동으로 삭제됩니다.
* 두 VPC의 IP 주소 영역이 겹치면 사용할 수 없습니다.
* 중복된 VPC 연결은 생성할 수 없습니다.
* 피어링된 양쪽 VPC의 **라우팅 테이블**에 별도의 **라우트**를 설정해야 통신이 가능합니다.
    * 라우트의 **대상 CIDR**에 상대 VPC의 IP 주소 영역을 입력하고, 게이트웨이 목록에서 프로젝트 피어링의 이름을 갖는 **INTER_PROJECT_PEERING** 항목을 선택해 라우트를 추가합니다.
    * 라우트를 추가한 라우팅 테이블에 연결된 서브넷으로만 통신이 가능합니다.
    * 기본 라우팅 테이블이 아닌 라우팅 테이블에 라우트를 추가하면 라우팅 테이블에 연결된 서브넷에서 피어링 통신이 가능합니다.
    * 프로젝트 피어링 생성 시 서브넷이 없는 VPC를 지정하면 프로젝트 피어링은 생성에 실패합니다.

### 프로젝트 피어링 생성

**프로젝트 피어링**을 생성하려면 피어 프로젝트의 **프로젝트 피어링 허용**에 내 프로젝트의 **테넌트 ID**와 **VPC ID**가 허용돼 있어야 합니다.
프로젝트 피어링을 생성하기 전에 피어 프로젝트의 관리자에게 **테넌트 ID**와 **VPC ID**를 전달하고 **프로젝트 피어링 허용**에 정보 등록을 요청해야 합니다.
피어 프로젝트에서 정보 등록이 완료되면 다음 절차에 따라 프로젝트 피어링을 생성할 수 있습니다.

> [참고] 프로젝트 피어링 허용 방법은 아래 "프로젝트 피어링 허용" 내용을 참고하시기 바랍니다. 

1. **Network > Peering Gateway > 프로젝트 피어링**으로 이동합니다.
2. **프로젝트 피어링 생성** 버튼을 클릭합니다.
3. **이름**, **로컬 VPC**, **피어 리전**, **피어 테넌트 ID**, **피어 VPC ID**를 입력합니다.</br>
   > [참고] 피어 테넌트 ID, 피어 VPC ID <br>
   > 피어 테넌트 ID와 피어 VPC ID 확인 방법은 아래 "피어 프로젝트의 피어 테넌트 ID 확인" 내용을 참고하시기 바랍니다.

### 프로젝트 피어링 허용

**프로젝트 피어링** 요청을 받는 쪽에서 설정을 합니다. 요청을 보내는 상대방의 **테넌트 ID**와 **VPC ID**를 입력하여 피어가 보내는 프로젝트 피어링 요청을 수락 할 수 있게 합니다.

1. **Network > Peering Gateway > 프로젝트 피어링** 으로 이동 합니다.
2. **프로젝트 피어링 허용** 버튼을 클릭 합니다.
3. **이름**, **피어 테넌트 ID**, **피어 VPC**를 입력하고 확인 버튼을 클릭합니다.

### 피어 프로젝트의 VPC ID 확인

**프로젝트 피어링**을 생성하기 위해서는 피어 프로젝트에서 피어링 대상이 되는 VPC의 **VPC ID**를 알아야 합니다. 다음 절차로 피어 프로젝트의 **VPC ID**를 확인 할 수 있습니다.

> [참고] 피어 프로젝트에 접근 권한이 없을시 피어 프로젝트의 관리자에게 VPC ID를 제공받기 바랍니다.

1. 피어 프로젝트의 콘솔 화면에 접속
2. **Network > VPC > 관리** 로 이동
3. 피어링 대상 VPC 선택
4. **기본 정보 > VPC 이름** 에 표기된 UUID 값 복사

### 피어 프로젝트의 테넌트 ID 확인

**프로젝트 피어링**을 생성하기 위해서는 피어 프로젝트에서 **테넌트 ID**를 알아야 합니다. 다음 절차로 피어 프로젝트의 **테넌트 ID**를 확인 할 수 있습니다.

> [참고] 피어 프로젝트에 접근 권한이 없을시 피어 프로젝트의 관리자에게 테넌트 ID를 제공받기 바랍니다.

1. 피어 프로젝트의 콘솔 화면에 접속
2. **Network > VPC > 관리** 로 이동
3. 피어링 대상 이나 화면에 표기되는 VPC중 아무거나 1개 선택
4. **기본 정보 > 테넌트 ID** 에 표기된 ID 값 복사
