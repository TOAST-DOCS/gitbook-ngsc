## Network > Colocation Gateway > 콘솔 사용 가이드

콘솔에서 **Colocation Gateway** 서비스를 사용하는 방법을 설명합니다.

## 코로케이션 게이트웨이

### 코로케이션 게이트웨이 생성

**코로케이션 게이트웨이**를 생성하는 방법은 다음과 같습니다.

> [참고] NHN Cloud Zone에 사전 등록된 VPC만 온프레미스 네트워크와 통신할 수 있습니다. 온프레미스 네트워크와 통신을 원하는 VPC는 코로케이션 게이트웨이 생성 전에 반드시 NHN Cloud 고객 센터 [1:1 문의](https://www.toast.com/kr/support/inquiry)로 문의하시기 바랍니다.<br>
> [주의] NHN Cloud Zone에 사전 등록되지 않은 VPC를 선택하여 코로케이션 게이트웨이를 생성하면 온프레미스 네트워크와의 통신은 불가능하며, 같은 NHN Cloud Zone에 연결된 다른 VPC와의 통신만 가능합니다.

1. **Network > Colocation Gateway**로 이동합니다.
2. **코로케이션 게이트웨이 생성** 버튼을 클릭하면 생성 화면이 나타납니다.
3. **코로케이션 게이트웨이**에 사용할 **이름**을 입력합니다.
4. **VPC**를 선택합니다.<br>
   선택된 VPC를 NHN Cloud Zone과 연결합니다.<br>
   VPC는 1개의 NHN Cloud Zone만 연결할 수 있습니다.
5. **NHN Cloud Zone**을 선택합니다.
6. **확인** 버튼을 클릭합니다.

### 코로케이션 게이트웨이 조회

생성한 코로케이션 게이트웨이는 **Network > Colocation Gateway** 화면에서 확인할 수 있습니다. 코로케이션 게이트웨이를 선택하면 하단에 코로케이션 게이트웨이 정보가 나타납니다.

### 코로케이션 게이트웨이 변경

코로케이션 게이트웨이를 변경하는 방법은 다음과 같습니다. **이름**, **설명**만 변경할 수 있습니다.

1. **Network > Colocation Gateway**로 이동합니다.
2. **코로케이션 게이트웨이 변경** 버튼을 클릭한 후 변경 화면에서 원하는 항목을 변경합니다.

### 코로케이션 게이트웨이 삭제

코로케이션 게이트웨이를 삭제하려면 **Network > Colocation Gateway** 화면에서 삭제할 코로케이션 게이트웨이를 선택하고 코로케이션 게이트웨이 삭제 버튼을 클릭합니다.

### 라우트

코로케이션 게이트웨이로부터 유입된 트래픽을 처리할 VM 인스턴스의 Port 및 가상 IP 포트를 지정할 수 있습니다. 라우트의 게이트웨이가 되는 VM 인스턴스에는 Network Virtual Appliance VM을 배치하여 VM 인스턴스 내부에서 트래픽을 제어하고 피어링 기능을 이용하여 다른 VPC로 트래픽을 전달할 수 있습니다.<br>
* 피어링으로 허브 & 스포크(Hub & Spoke) 형태의 VPC 연결을 구성하고 허브 VPC에 위치한 Network Virtual Appliance로 트래픽을 제어하는 상황에서 고객의 온프레미스 네트워크를 허브 VPC에 스포크로 추가하기 위해 코로케이션 게이트웨이의 라우트 기능을 활용할 수 있습니다. 

> [참고] 현재는 한국(평촌), 한국(판교) 리전에서만 기능이 제공됩니다.

#### 라우트 생성

1. 라우트를 설정할 코로케이션 게이트웨이를 선택합니다.
2. 하단 탭에서 라우트를 선택합니다.
3. **라우트 변경** 버튼을 클릭합니다.
4. **+** 버튼을 클릭합니다.
5. 대상 CIDR을 입력합니다.
6. 게이트웨이를 선택합니다.
   > [참고] 게이트웨이는 인스턴스와 가상 IP만 선택이 가능합니다.<br>
7. **확인** 버튼을 클릭합니다.

#### 라우트 삭제

1. 라우트 설정을 삭제할 코로케이션 게이트웨이를 선택합니다.
2. 하단 탭에서 라우트를 선택합니다.
3. **라우트 변경** 버튼을 클릭합니다.
4. 삭제 대상의 **-** 버튼을 클릭합니다.
5. **확인** 버튼을 클릭합니다.

## 코로케이션 게이트웨이 사용

같은 NHN Cloud Zone에 연결된 VPC 간 통신은 NHN Cloud Zone에서 코로케이션 게이트웨이 생성 시 VPC에 설정되어 있는 CIDR 값을 이용하여 Longest prefix matching으로 라우트 처리를 합니다. CIDR이 중복되면 중복 대상 중 임의의 1개 VPC만 통신됩니다.

### 코로케이션 게이트웨이 라우트 설정

1. **Network > VPC > 라우팅**으로 이동합니다.
2. **코로케이션 게이트웨이**를 생성한 **VPC**의 **라우팅 테이블**을 선택합니다.
3. 하단에 표시되는 **라우팅 테이블** 정보에서 **라우트** 탭을 선택합니다.
4. **라우트 생성** 버튼을 클릭하면 생성 화면이 나타납니다.
5. **대상 CIDR**을 입력합니다.<br>
   온프레미스 네트워크 CIDR이나 동일 NHN Cloud Zone에 연결된 다른 VPC의 CIDR
6. **게이트웨이**의 **게이트웨이 선택** 목록에서 **TRANSIT_GATEWAY**를 선택합니다.<br>
   > [참고] TRANSIT_GATEWAY항목은 코로케이션 게이트웨이 생성을 이용해 만들 수 있습니다.
